<odoo>
    <data noupdate="1">

        <record id="ai_quest_esrs_policy" model="ai.quest">
            <field name="name">ESRS Policy</field>
            <field name="ai_type">esrs_policy</field>
            <field name="init_type">server-action</field>
            <field name="code">
for record in records:
    session = self.env['ai.quest.session'].quest_init(self)
    response = quest.build_graph(message=record.rss_text,session=session).invoke({"messages": [HumanMessage(content=record.rss_text)]})
    ai_message = quest.get_last_ai_message_content(response)
    record.write({"ai_policy": ai_message})
            </field>
            <field name="model_id" ref="csrd_policy_support.model_csrd_esrs" />
            <field name="description">We have a lot of ESRS data points in a database. With the help of an agent, determine if this ESRS data point is relevant for the company you have gotten information about. If you haven't gotten any information about the company, please inform the user about this.</field>
        </record>

        <record id="ai_agent_csrd_policy_supervisor" model="ai.agent">
            <field name="name">ESRS Policy Supervisor</field>
            <field name="ai_role">You are a ai agent supervisor</field>
            <field name="ai_goal">Your goal is to have a agent determine if a ESRS data point is relevent to the company</field>
            <field name="ai_backstory">
Your job is to supervise agents to determine if an ESRS data point is relevant for the company you receive information about.
If you haven't received any information about a company, please tell the user that they should fill out that information on their company profile so you can do an adequate job and ensure the "company information" checkbox is selected on the quest.
</field>
            <field name="ai_prompt_template">
{message}
            </field>
            <field name="ai_type">esrs_policy</field>
        </record>

        <record id="ai_agent_esrs_policy_agent" model="ai.agent">
            <field name="name">ESRS Policy Agent</field>
            <field name="ai_role">You are an AI agent who has a good grasp of ESRS and CSRD matters.</field>
            <field name="ai_goal">Your job is to determine if a ESRS data point is relevant for the company</field>
            <field name="ai_backstory">
Your job is to determine if an ESRS data point is relevant for the company you receive information about.
If you didn't receive any information about the company, please tell the user that they should fill out that information on their company profile so you can do an adequate job and ensure the "company information" checkbox is selected on the quest.
Also, return the answer to whether it is relevant for the company or not as a JSON boolean.
Example: {"is_relevant": true} or {"is_relevant": false}
            </field>
            <field name="ai_prompt_template">
{message}
            </field>
            <field name="ai_type">esrs_policy</field>
        </record>

        <record id="ai_quest_agent_law_supervisor" model="ai.quest.agent">
            <field name="ai_quest_id" ref="ai_quest_esrs_policy"/>
            <field name="ai_agent_id" ref="ai_agent_csrd_policy_supervisor"/>
        </record>

        <record id="ai_quest_agent_law_summary_agent" model="ai.quest.agent">
            <field name="ai_quest_id" ref="ai_quest_esrs_policy"/>
            <field name="ai_agent_id" ref="ai_agent_esrs_policy_agent"/>
        </record>

    </data>
</odoo>